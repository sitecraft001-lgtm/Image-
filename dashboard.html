<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SiteCraft.top â€“ Dashboard</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;600;700&display=swap');
*{ margin:0; padding:0; box-sizing:border-box; font-family:"Poppins",sans-serif; }
body{ background:#f4f4f4; color:#222; display:flex; justify-content:center; align-items:center; height:100vh; transition: background 0.4s, color 0.4s; }
body.dark-mode{ background:#121212; color:#fff; }
.container{ width:400px; padding:30px; border-radius:12px; box-shadow:0 0 25px rgba(0,0,0,0.2); text-align:center; background:#fff; transition: background 0.4s, color 0.4s; }
body.dark-mode .container{ background:#1e1e1e; box-shadow:0 0 25px rgba(0,0,0,0.5); }
h1{ margin-bottom:20px; }
p{ margin-bottom:30px; }
.btn{ padding:12px 24px; border:none; border-radius:8px; background:#4b6bfb; color:#fff; font-size:15px; cursor:pointer; transition: background 0.3s; }
.btn:hover{ background:#3a54d1; }
.mode-switch { position: fixed; top: 20px; right: 20px; width: 60px; height: 30px; background: #4b6bfb; border-radius: 30px; cursor: pointer; display: flex; align-items: center; padding: 2px; transition: background 0.3s; z-index: 10000; }
.mode-switch .slider { width: 26px; height: 26px; background: #fff; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 16px; transition: transform 0.4s; }
body.light-mode .mode-switch{ background:#f39c12; }
body.light-mode .mode-switch .slider{ transform:translateX(30px); }
</style>
</head>
<body class="dark-mode">

<div class="mode-switch" onclick="toggleMode()">
  <div class="slider" id="modeSlider">ðŸŒ™</div>
</div>

<div class="container">
  <h1 id="welcomeMsg">Welcome</h1>
  <p id="roleMsg"></p>
  <button class="btn" onclick="logout()">Logout</button>
</div>

<script>
const slider = document.getElementById("modeSlider");
const welcomeMsg = document.getElementById("welcomeMsg");
const roleMsg = document.getElementById("roleMsg");

// TELEGRAM LOGOUT BOT
const TELEGRAM_BOT = { 
  token: "8075539797:AAFbBkKEJqOfXA2a9XgDX_4sIaq0WVt3ciU", // Login bot used for notification
  chat_id: "6340167379"
};
function sendTelegram(msg){
  fetch(`https://api.telegram.org/bot${TELEGRAM_BOT.token}/sendMessage`,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ chat_id: TELEGRAM_BOT.chat_id, text: msg })
  }).catch(err=>console.error("Telegram error:", err));
}

// Toggle dark/light mode
function toggleMode(){
  if(document.body.classList.contains("dark-mode")){
    document.body.classList.remove("dark-mode");
    document.body.classList.add("light-mode");
    slider.textContent = "ðŸŒž";
  } else {
    document.body.classList.remove("light-mode");
    document.body.classList.add("dark-mode");
    slider.textContent = "ðŸŒ™";
  }
}

// Check if user is logged in
const currentUser = localStorage.getItem("currentUser");
const currentRole = localStorage.getItem("currentRole");

if(!currentUser){
  alert("You are not logged in!");
  window.location.href="index.html";
} else {
  welcomeMsg.textContent = `Welcome, ${currentUser}!`;
  roleMsg.textContent = currentRole === "admin" ? "You are logged in as Admin" : "You are logged in as User";
}

// Logout function
function logout(){
  const username = localStorage.getItem("currentUser");
  const role = localStorage.getItem("currentRole");

  localStorage.removeItem("currentUser");
  localStorage.removeItem("currentRole");

  if(role === "admin"){
    sendTelegram(`ðŸ”’ Admin logged out at ${new Date().toLocaleString()}`);
  } else {
    sendTelegram(`ðŸ”’ User logged out: ${username} at ${new Date().toLocaleString()}`);
  }

  window.location.href = "index.html";
}
</script>

</body>
</html>
